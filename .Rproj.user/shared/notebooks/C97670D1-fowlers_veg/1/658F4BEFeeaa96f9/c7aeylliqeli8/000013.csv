"0","austraits <- load_austraits(version = ""5.0.0"", path = ""intro/downloads"")"
"2","Loading data from 'intro/downloads/austraits-5.0.0.rds'
"
"0","#extract life history traits"
"0","annual_perennial_traits <- austraits %>% extract_trait('life_history')"
"0",""
"0","#down with tibbles"
"0","annual_perennial_traits <- left_join(annual_perennial_traits[[""traits""]], annual_perennial_traits[[""taxa""]], by = ""taxon_name"")"
"0",""
"0","#unique taxa with life history traits"
"0","length(unique(annual_perennial_traits$taxon_name))"
"1","[1]"
"1"," 30474"
"1","
"
"0","#28332"
"0",""
"0","#different life history values"
"0","unique(annual_perennial_traits$value)"
"1"," [1]"
"1"," ""perennial""                                       "
"1"," ""biennial perennial""                              "
"1","
"
"1"," [3]"
"1"," ""annual""                                          "
"1"," ""annual perennial""                                "
"1","
"
"1"," [5]"
"1"," ""biennial""                                        "
"1"," ""annual biennial""                                 "
"1","
"
"1"," [7]"
"1"," ""annual short_lived_perennial""                    "
"1"," ""ephemeral""                                       "
"1","
"
"1"," [9]"
"1"," ""short_lived_perennial""                           "
"1"," ""annual ephemeral""                                "
"1","
"
"1","[11]"
"1"," ""annual biennial perennial""                       "
"1"," ""biennial short_lived_perennial""                  "
"1","
"
"1","[13]"
"1"," ""annual ephemeral perennial""                      "
"1"," ""annual biennial short_lived_perennial""           "
"1","
"
"1","[15]"
"1"," ""perennial short_lived_perennial""                 "
"1"," ""biennial perennial short_lived_perennial""        "
"1","
"
"1","[17]"
"1"," ""annual perennial short_lived_perennial""          "
"1"," ""ephemeral short_lived_perennial""                 "
"1","
"
"1","[19]"
"1"," ""ephemeral perennial""                             "
"1"," ""annual biennial perennial short_lived_perennial"" "
"1","
"
"1","[21]"
"1"," ""annual ephemeral short_lived_perennial""          "
"1"," ""annual ephemeral perennial short_lived_perennial"""
"1","
"
"0","# [1] ""perennial""                                       ""biennial perennial""       # [3] ""annual""                                          ""annual perennial""         # [5] ""biennial""                                        ""annual biennial""          # [7] ""annual short_lived_perennial""                    ""ephemeral""                # [9] ""short_lived_perennial""                           ""annual ephemeral""        #[11] ""annual biennial perennial""                       ""biennial short_lived_perennial""                 "
"0","#[13] ""annual ephemeral perennial""                      ""annual biennial short_lived_perennial""          "
"0","#[15] ""perennial short_lived_perennial""                 ""biennial perennial short_lived_perennial""       "
"0","#[17] ""annual perennial short_lived_perennial""          ""ephemeral short_lived_perennial""                "
"0","#[19] ""ephemeral perennial""                             ""annual biennial perennial short_lived_perennial"""
"0",""
"0",""
"0","annual_trait <- unique(annual_perennial_traits$value[grepl(""annual"", annual_perennial_traits$value)])"
"0",""
"0",""
"0","#number of records with 'annual' value"
"0","sum(annual_perennial_traits$value %in% annual_trait)"
"1","[1]"
"1"," 15435"
"1","
"
"0","#12441"
"0",""
"0","write.csv(annual_perennial_traits, 'data_out/life_form_traits.csv')"
"0",""
"0","#records of annuals"
"0","annual_species_data <- subset(annual_perennial_traits, value %in% annual_trait)"
"0",""
"0","write.csv(annual_species_data, 'data_out/annual_species.csv')"
"0",""
"0","annual_perennial_traits <- read.csv('data_out/life_form_traits.csv')"
"0",""
"0","annual_species_data <- read.csv('data_out/annual_species.csv')"
"0",""
"0","#vector containing names of all annual taxa from austraits"
"0","annual_species <- unique(annual_species_data$taxon_name)"
"0",""
"0","#unique taxa with at least one record of annual life history form"
"0","length(unique(annual_species_data$taxon_name))"
"1","[1]"
"1"," 4495"
"1","
"
"0","#4427"
"0",""
"0","fowlers_veg$in_austraits_lf <- fowlers_veg$scientificName %in% annual_perennial_traits$taxon_name"
"0","#206 species in the fowlers_veg df are not in austraits 'lifeform' - mostly due to not being a species (genus, family etc)"
"0",""
"0","fowlers_life_form <- annual_perennial_traits %>%"
"0","  filter(taxon_name %in% fowlers_veg$scientificName)"
"0",""
"0","most_frequent_lifeform <- fowlers_life_form %>%"
"0","  group_by(taxon_name) %>%"
"0","  summarise(most_common_lifeform = names(sort(table(value), decreasing = TRUE))[1])"
"0",""
"0","fowlers_veg <- fowlers_veg %>%"
"0","  left_join(most_frequent_lifeform, by = c(""scientificName"" = ""taxon_name""))"
"0",""
"0","fowlers_veg <- fowlers_veg %>%"
"0","  mutate(simp_lf = case_when("
"0","    grepl('annual', most_common_lifeform, ignore.case = TRUE) ~ 'annual',"
"0","    grepl('perennial', most_common_lifeform, ignore.case = TRUE) ~ 'perennial',"
"0","    TRUE ~ most_common_lifeform"
"0","  ))"
"0","  "
